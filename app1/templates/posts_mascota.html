{% extends 'layout.html' %}

{% block content %}
<div class="container mt-4">

    <!-- =========================================================
         SECCIÓN: TÍTULO Y DATOS PRINCIPALES DE LA MASCOTA
         ---------------------------------------------------------
         TODO: Mostrar aquí el nombre de la mascota usando
               la variable de contexto 'mascota'.
         ========================================================= -->
    <h2>Galería de {{ mascota.nombre }}</h2>

    <hr>

    <!-- =========================================================
         SECCIÓN: LISTA / GALERÍA DE POSTS DE LA MASCOTA
         ---------------------------------------------------------
         CONTEXTO:
         - La vista envía una variable 'posts' con la lista de
           publicaciones (PostMascota) asociadas a esta mascota.

         OBJETIVO:
         - Recorrer 'posts' con un bucle for y mostrar cada post
           en una tarjeta (card) o bloque simple.
         
         Dentro del for, mostrar:
              - Título del post
              - Fecha del post
              - Descripción del post
              - Imagen del post (campo foto)

         REVISAR VISTA DE DETALLE DE MASCOTA COMO REFERENCIA
         ========================================================= -->
    {% if posts %}
      {% for post in posts %}
            <p><strong>Titulo:</strong> {{ post.titulo }} </p>
            <p><strong>Fecha:</strong> {{ post.fecha }}</p>
            <p><strong>Descripcion:</strong> {{ post.descripcion }}</p>

            {% if post.foto %}
                <img src="{{ post.foto.url }}" class="img-fluid rounded mb-3">
            {% else %}
                <img src="https://via.placeholder.com/400x300?text=Sin+Foto" class="img-fluid rounded mb-3">
            {% endif %}
      {% endfor %}
    {% else %}
      <p><strong></strong> No se han subido posteos aún  </p>
    {% endif %}
    <div class="row">

    </div>


    <!-- =========================================================
         SECCIÓN: FORMULARIO PARA CREAR NUEVOS POSTS
         ---------------------------------------------------------
         CONTEXTO:
         - La vista, en la siguiente pregunta del examen, enviará
           un formulario 'form' basado en PostMascotaForm.

         OBJETIVO:
         - Mostrar el formulario dentro de la plantilla usando
           sintaxis de Django.
         ========================================================= -->


    <hr class="mt-4 mb-3">

    <h3>Registrar nuevo momento / publicación</h3>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        {% if form.non_field_errors %}
          <div class="alert alert-danger">
            {{ form.non_field_errors }}
          </div>
        {% endif %}

        <div class="mb-3">
          {{ form.titulo.label_tag }}
          {{ form.titulo }}
        </div>

        <div class="mb-3">
          {{ form.descripcion.label_tag }}
          {{ form.descripcion }}
          {% if form.descripcion.errors %}
            <div class="alert alert-danger">
              {{ form.descripcion.errors }}
            </div>
          {% endif %}
        </div>

        <div class="mb-3">
          {{ form.fecha.label_tag }}
          {{ form.fecha }}
          {% if form.fecha.errors %}
            <div class="alert alert-danger">
              {{ form.fecha.errors }}
            </div>
          {% endif %}
        </div>

        <div class="mb-3">
          {{ form.foto.label_tag }}
          {{ form.foto }}
        </div>

        <button type="submit" class="btn btn-primary mt-2">Guardar publicación</button>
    </form>



    <!-- =========================================================
         SECCIÓN: BOTÓN PARA VOLVER
         ---------------------------------------------------------
         TODO: Opcionalmente, los alumnos pueden agregar un enlace
               para regresar a la ruta home de la app1
         ========================================================= -->

    <a href="{% url 'app1:home' %}" class="btn btn-secondary mt-2">Volver a inicio</a>


</div>
{% endblock %}
